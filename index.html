<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Rock-Paper-Scissors</title>
    <link rel="stylesheet" href="style.css">
</head>
    <body>
        
        <h1>Click on a picture to start a game of Rock-Paper-Scissors</h1>
        <div class="positionedText">
            <p id="results">Here is your result: </p>
            <p id="points">Your points: </p>
        </div>
        <div class="centeredImages">
            <div id="rock" class="clickImage">
            </div>
            <div id="paper" class="clickImage">
            </div> 
            <div id="scissors" class="clickImage">
            </div>   
        </div>
    

        <script type="text/javascript">

            function computerPlay(mode) {
                let possiblePicks;
                if (mode === "p"){
                    possiblePicks = ["normal", "fighting", "flying", "poison", "ground", "rock", "bug", "ghost", "steel", "fire", "water", "grass", "electric", "psychic", "ice", "dragon", "dark", "fairy"];
                }
                else {
                    possiblePicks = ["rock", "paper", "scissors"];
                }
                let randomNumber = Math.ceil(Math.random()*possiblePicks.length)-1;



                let computersPick = possiblePicks[randomNumber];

                return computersPick;
            }

            let normalGameDecisionArray = {
                    "rock" : {"rock": 0, "paper": -1, "scissors": 1}, 
                    "paper" : {"rock": 1, "paper": 0, "scissors": -1},
                    "scissors" : {"rock": -1, "paper": 1, "scissors": 0}
                };

            let pkmnGameDecisionArray = {
                "normal" : { "normal": 0, "fighting": 0, "flying": 0, "poison": 0, "ground": 0, "rock": -1, "bug": 0, "ghost": -1, "steel": -1, "fire": 0, "water": 0, "grass": 0, "electric": 0, "psychic": 0, "ice": 0, "dragon": 0, "dark": 0, "fairy": 0},
                "fighting" : { "normal": 1, "fighting": 0, "flying": -1, "poison": -1, "ground": 0, "rock": 1, "bug": -1, "ghost": -1, "steel": 1, "fire": 0, "water": 0, "grass": 0, "electric": 0, "psychic": -1, "ice": 1, "dragon": 0, "dark": 1, "fairy": -1},
                "flying" : { "normal": 0, "fighting": 1, "flying": 0, "poison": 0, "ground": 0, "rock": -1, "bug": 1, "ghost": 0, "steel": -1, "fire": 0, "water": 0, "grass": 1, "electric": -1, "psychic": 0, "ice": 0, "dragon": 0, "dark": 0, "fairy": 0},
                "poison" : { "normal": 0, "fighting": 0, "flying": 0, "poison": -1, "ground": -1, "rock": -1, "bug": 0, "ghost": -1, "steel": -1, "fire": 0, "water": 0, "grass": 1, "electric": 0, "psychic": 0, "ice": 0, "dragon": 0, "dark": 0, "fairy": 1},
                "ground" : { "normal": 0, "fighting": 0, "flying": -1, "poison": 1, "ground": 0, "rock": 1, "bug": -1, "ghost": 0, "steel": 1, "fire": 1, "water": 0, "grass": -1, "electric": 1, "psychic": 0, "ice": 0, "dragon": 0, "dark": 0, "fairy": 0},
                "rock" : { "normal": 0, "fighting": -1, "flying": 1, "poison": 0, "ground": -1, "rock": 0, "bug": 1, "ghost": 0, "steel": -1, "fire": 1, "water": 0, "grass": 0, "electric": 0, "psychic": 0, "ice": 1, "dragon": 0, "dark": 0, "fairy": 0},
                "bug" : { "normal": 0, "fighting": -1, "flying": -1, "poison": -1, "ground": 0, "rock": 0, "bug": 0, "ghost": -1, "steel": -1, "fire":-1, "water": 0, "grass": 1, "electric": 0, "psychic": 1, "ice": 0, "dragon": 0, "dark": 1, "fairy": -1},
                "ghost" : { "normal": -1, "fighting": 0, "flying": 0, "poison": 0, "ground": 0, "rock": 0, "bug": 0, "ghost": 1, "steel": 0, "fire": 0, "water": 0, "grass": 0, "electric": 0, "psychic": 1, "ice": 0, "dragon": 0, "dark": -1, "fairy": 0},
                "steel" : { "normal": 0, "fighting": 0, "flying": 0, "poison": 0, "ground": 0, "rock": 1, "bug": 0, "ghost": 0, "steel": -1, "fire": -1, "water": -1, "grass": 0, "electric": -1, "psychic": 0, "ice": 1, "dragon": 0, "dark": 0, "fairy": 1},
                "fire" : { "normal": 0, "fighting": 0, "flying": 0, "poison": 0, "ground": 0, "rock": -1, "bug": 1, "ghost": 0, "steel": 1, "fire": -1, "water": -1, "grass": 1, "electric": 0, "psychic": 0, "ice": 1, "dragon": -1, "dark": 0, "fairy": 0},
                "water" : { "normal": 0, "fighting": 0, "flying": 0, "poison": 0, "ground": 1, "rock": 1, "bug": 0, "ghost": 0, "steel": 0, "fire": 1, "water": -1, "grass": -1, "electric": 0, "psychic": 0, "ice": 0, "dragon": -1, "dark": 0, "fairy": 0},
                "grass" : { "normal": 0, "fighting": 0, "flying": -1, "poison": -1, "ground": 1, "rock": 1, "bug": -1, "ghost": 0, "steel": -1, "fire": -1, "water": 1, "grass": -1, "electric": 0, "psychic": 0, "ice": 0, "dragon": -1, "dark": 0, "fairy": 0},
                "electric" : { "normal": 0, "fighting": 0, "flying": 1, "poison": 0, "ground": -1, "rock": 0, "bug": 0, "ghost": 0, "steel": 0, "fire": 0, "water": 1, "grass": -1, "electric": -1, "psychic": 0, "ice": 0, "dragon": -1, "dark": 0, "fairy": 0},
                "psychic" : { "normal": 0, "fighting": 1, "flying": 0, "poison": 1, "ground": 0, "rock": 0, "bug": 0, "ghost": 0, "steel": -1, "fire": 0, "water": 0, "grass": 0, "electric": 0, "psychic": -1, "ice": 0, "dragon": 0, "dark": -1, "fairy": 0},
                "ice" : { "normal": 0, "fighting": 0, "flying": 1, "poison": 0, "ground": 1, "rock": 0, "bug": 0, "ghost": 0, "steel": -1, "fire": -1, "water": -1, "grass": 1, "electric": 0, "psychic": 0, "ice": -1, "dragon": 1, "dark": 0, "fairy": 0},
                "dragon" : { "normal": 0, "fighting": 0, "flying": 0, "poison": 0, "ground": 0, "rock": 0, "bug": 0, "ghost": 0, "steel": -1, "fire": 0, "water": 0, "grass": 0, "electric": 0, "psychic": 0, "ice": 0, "dragon": 1, "dark": 0, "fairy": -1},
                "dark" : { "normal": 0, "fighting": -1, "flying": 0, "poison": 0, "ground": 0, "rock": 0, "bug": 0, "ghost": 1, "steel": 0, "fire": 0, "water": 0, "grass": 0, "electric": 0, "psychic": 1, "ice": 0, "dragon": 0, "dark": -1, "fairy": -1},
                "fairy" : { "normal": 0, "fighting": 1, "flying": 0, "poison": -1, "ground": 0, "rock": 0, "bug": 0, "ghost": 0, "steel": -1, "fire": -1, "water": 0, "grass": 0, "electric": 0, "psychic": 0, "ice": 0, "dragon": 1, "dark": 1, "fairy": 0},
            }

            function gameRound(playerSelection, computerSelection, mode){  
                let thisGameDecisionArray;
                if (mode === "p"){
                    thisGameDecisionArray = pkmnGameDecisionArray;
                }
                else{
                    thisGameDecisionArray = normalGameDecisionArray;
                }

                let result = thisGameDecisionArray[playerSelection][computerSelection];
                let message = {
                    "-1": "You lose! "+computerSelection+" beats "+playerSelection+".",
                    "0": playerSelection+" and "+computerSelection+" are a draw!",
                    "1": "You win! "+playerSelection+" beats "+computerSelection+".",
                };
                return [message[result], result];
            }

            let points = 0;
            const images = document.querySelectorAll(".clickImage");
            images.forEach((image) => {
                image.addEventListener('click', (e) => {
                    let resultArray = gameRound(image.getAttribute("id"), computerPlay("n"), "n");
                    points += resultArray[1];
                    document.getElementById('results').innerHTML = "Here is your result: "+resultArray[0];
                    document.getElementById('points').innerHTML = "Your points: "+points;
                });
            });

            /* function game(){
                let points = 0;
                let mode = window.prompt("Do you want to play normal mode (n) or Pok√©mon mode (p)?", "n").toLowerCase();
                let normalPicks = "(Rock, Paper or Scissors)";
                let pkmnPicks = "(normal, fighting, flying, poison, ground, rock, bug, ghost, steel, fire, water, grass, electric, psychic, ice, dragon, dark, fairy)"
                let possiblePicks;

                if (mode === "p") {
                    console.log("Okay, let's play PKMN mode.");
                    possiblePicks = pkmnPicks;
                }
                else {
                    console.log("Okay, let's play normal mode.");
                    possiblePicks = normalPicks;
                }


                let i;
                for (i = 1; i <= 5; i++) {
                    console.log("Round "+i);
                    let playerSelection = window.prompt("What's your pick? "+possiblePicks).toLowerCase();
                    let resultArray = gameRound(playerSelection, computerPlay(mode), mode);
                    console.log(resultArray[0]);
                    points += resultArray[1];
                    console.log("Your current points balance is "+points);
                };
                if (points<0) {
                    console.log("Game over! You lose the game. Try again!");
                } 
                else if (points === 0){
                    console.log("The game has no winner. Try again!");
                }
                else {
                    console.log("You win the game. You can be very proud!");
                }
            } */

            //game();
            //console.log(gameRound(computerPlay(), computerPlay()))

        </script>
    </body>
</html>